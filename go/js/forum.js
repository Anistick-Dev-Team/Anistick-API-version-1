var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

if(typeof FORUM=="undefined"||FORUM==null){FORUM={}}if(typeof FORUM=="object"){FORUM.BrowseThread=(function(){var a={};return function(c){var e=c;var d=0;var b=function(){jQuery.get("/ajax/browsethreads/"+e+"/"+d,function(f){parseResponse(f);if(responseArray.code=="0"){jQuery("#forum_topics_container").html(responseArray.html);scrollTo(0,0)}resetResponse()})};return a[c]||(a[c]={display:function(){b()},next:function(){++d;b()},prev:function(){--d;b()}})}})()}!function(b){var c={page:0,removeThread:function(e){var d=GT.gettext("Are you sure to remove this topic?");if(!confirm(d)){return}b.post("/ajax/deleteThread/0/"+e,function(f){parseResponse(f);if(responseArray.code=="0"){b("#forum-topic-"+e).fadeOut(300,function(){b(this).remove()});b(document).trigger(b.Event("threadDeleted"))}else{}resetResponse()})},loadThreads:function(d,e,f){b.get("/ajax/browsethreads/"+d+"/"+e,function(g){parseResponse(g);b(f).html(responseArray.html);resetResponse()})},moveThread:function(f,d){var e={thread_id:f,forum_id:d};b.post("/ajax/adminMoveTopic",e,function(g){parseResponse(g);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){window.location.reload(true)}else{showNotice(responseArray.json.error,true)}}resetResponse()})}};var a=function(d){var e=this;this.$el=d;this.$el.click(function(g){var f=b(this),h=f.data("threadId");g.preventDefault();if(f.hasClass("not-following")){e.follow(h)}else{if(f.hasClass("following")){e.unfollow(h)}}}).mouseleave(function(){b(this).removeClass("cancel-hover")})};a.prototype={follow:function(f){var e=this,d="/ajax/followThread/"+f;b.post(d,function(g){parseResponse(g);if(responseArray.code=="0"){e.setState("following");e.$el.addClass("cancel-hover");b("input[name=user_follow]").prop("checked",true)}resetResponse()})},unfollow:function(f){var e=this,d="/ajax/unfollowThread/"+f;b.post(d,function(g){parseResponse(g);if(responseArray.code=="0"){e.setState("not-following");b("input[name=user_follow]").prop("checked",false)}resetResponse()})},setState:function(d){this.$el.removeClass("following not-following").addClass(d)}};b(function(){var d=0;b(document).on("click.forum.goanimate",'[data-action="thread-delete"]',function(g){var f=b(this),h=f.data("threadId");g.preventDefault();h&&c.removeThread(h)}).on("click.forum.goanimate",'[data-action="thread-load"]',function(i){var h=b(this),f=h.data("forumId"),g=h.data("target");i.preventDefault();f&&c.loadThreads(f,page,g)}).on("click.forum.goanimate",'[data-action="thread-move"]',function(g){var f=b(this),h=f.data("threadId");g.preventDefault();b("#move-topic-select").data("threadId",h);b("#move-topic-subject").html(b("#forum-topic-"+h+" .subject").text());b("#move-topic").modal("show")}).on("change","#move-topic-select",function(){var f=b(this),g=f.data("threadId"),e=f.val();console.log(e);if(e){c.moveThread(g,e)}});b(".thread-follow-button").each(function(){var e=b(this);if(!e.data("threadFollowButton")){e.data("threadFollowButton",new a(e))}});b('[rel="tooltip"]').tooltip()})}(jQuery);

}
